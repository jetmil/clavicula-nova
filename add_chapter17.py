#!/usr/bin/env python3
"""Add Chapter 17: Эвокация — полный ритуал"""

import json

chapter17_content = """# Эвокация — полный ритуал

Эвокация — вызывание духа к видимому проявлению вне мага. Это центральная практика соломоновой магии, вершина искусства церемониального мага. В этой главе мы дадим полный протокол эвокации от подготовки до закрытия.

## Подготовка (дни до ритуала)

### Выбор духа

Первый шаг — чёткое определение цели и выбор соответствующего духа.

**Вопросы для себя:**
- Чего конкретно я хочу достичь?
- Какой класс духов для этого подходит (ангелы, гоэтия, планетарные духи)?
- Какой конкретный дух специализируется на моей цели?
- Готов ли я к работе с этим духом?

Изучи духа: его способности, ранг, характер, традиционные предупреждения. Не вызывай того, о ком ничего не знаешь.

### Тайминг

Определи оптимальное время:
- День недели (планета духа)
- Планетарный час
- Фаза Луны
- Личные соображения (когда ты в лучшей форме)

Составь расписание: когда начинаешь подготовку, когда проводишь ритуал.

### Физическая подготовка

За 3-7 дней до ритуала:
- Упрощай питание, уменьшай порции
- Откажись от алкоголя и веществ
- Спи регулярно, достаточно
- Воздерживайся от сексуальной активности
- Избегай конфликтов и стресса

В день ритуала:
- Ничего не ешь (или минимум — лёгкий завтрак)
- Прими ритуальное омовение
- Надень чистую одежду

### Подготовка пространства

- Убери помещение физически
- Проветри
- Начерти или разложи круг
- Установи треугольник (для гоэтии)
- Разложи инструменты
- Проверь: свечи, благовония, спички, вода

### Подготовка материалов

- Сигил духа (нарисован или напечатан)
- Текст призывания (выучен или под рукой)
- Благовоние, соответствующее духу
- Подношение (если требуется)
- Записная книжка и ручка

## Открытие храма

### Вхождение в состояние

1. Встань в центре круга.
2. Закрой глаза. Сделай несколько глубоких вдохов.
3. Отпусти мысли о внешнем мире.
4. Утверди намерение: "Я стою между мирами для священной работы".
5. Почувствуй изменение атмосферы.

### Освящение пространства

1. Зажги лампу/свечи.
2. Произнеси молитву открытия (Отче наш, личная молитва, или каббалистическая формула).
3. Очисти пространство водой и солью — обойди круг по часовой стрелке, окропляя.
4. Очисти благовонием — обойди с курильницей.

### Защита

1. Выполни LBRP (Малый Ритуал Изгоняющей Пентаграммы).
2. Призови стражей — архангелов на четырёх сторонах.
3. Визуализируй защитную сферу вокруг круга.
4. Утверди: "Я стою под защитой YHVH. Ничто враждебное не может войти".

## Призывание духа

### Иерархия воззваний

Не вызывай духа напрямую. Сначала призови силы, которые контролируют его:

1. **Божественное имя.** Вибрируй имя Бога, соответствующее духу. Для гоэтии — имена Соломона: "Адонай, Элохим, Цебаот..."

2. **Архангел.** Призови архангела планеты или сферы, к которой принадлежит дух.

3. **Ангельский хор.** Призови ангелов соответствующего уровня.

4. **Непосредственно дух.** Только теперь обращайся к духу напрямую.

### Первое призывание

Держа сигил духа:

"Я призываю тебя, [имя духа], во имя YHVH, во имя Адонай, во имя Элохим, которые сотворили небо и землю и всё, что в них. Приди ко мне в видимой и приятной форме, без вреда для меня или кого-либо другого, и ответь истинно на все мои вопросы."

### Второе призывание (если дух не появился)

"Я вновь призываю тебя, [имя духа], и заклинаю тебя всеми именами, которым ты обязан повиноваться. Во имя Аратрона, Бетора, Фалега, Оха, Хагит, Офиэля, Фула. Во имя всех святых ангелов. Приди сейчас и исполни мою волю!"

### Констрейнт (принуждение)

Если дух упорствует:

"Проклинаю тебя, непокорный дух, именами AGLA, On, Tetragrammaton. Ибо ты ослушался голоса Всевышнего. Если не явишься немедленно, я низвергну тебя в бездну на тысячу лет. Во имя Адонай, повинуйся!"

**Предупреждение:** Констрейнт — крайняя мера. Он портит отношения с духом. Используй только если другие методы не работают.

## Появление духа

### Как распознать

Дух может проявиться по-разному:
- Видимый образ в треугольнике
- Видение в зеркале или хрустальном шаре
- Ощущение присутствия
- Голос (внешний или внутренний)
- Изменение атмосферы — холод, тепло, запах
- Движение пламени свечей

### Верификация

Когда дух появился, проверь его:

1. "Явившийся дух, назови своё имя".
2. "Присягни именем YHVH, что ты — [имя призванного духа] и никто иной".
3. "Покажи свой истинный облик".

Если что-то не так — это может быть обманщик. Изгони и начни снова.

### Общение

Говори с духом уважительно, но твёрдо. Ты — хозяин ритуала.

"Дух [имя], я призвал тебя, чтобы [цель]. Согласен ли ты помочь мне в этом?"

Выслушай ответ. Веди записи или запоминай.

### Договор

Если дух согласен помочь:
- Конкретизируй задачу
- Установи сроки
- Обсуди, что дух хочет взамен (будь осторожен!)
- Получи подтверждение

**Предупреждение:** Не обещай того, что не можешь или не хочешь выполнить. Нарушенное обещание духу — серьёзная проблема.

## Лицензия на отпускание

После завершения общения отпусти духа:

"Дух [имя], благодарю тебя за явление и за твою помощь. Теперь уходи в мире туда, откуда ты пришёл. Пусть между нами будет мир, и пусть ты явишься снова, когда я призову тебя. Во имя Отца, и Сына, и Святого Духа (или: Во имя YHVH Элохим), отпускаю тебя. Иди".

Почувствуй, как присутствие уходит.

## Закрытие храма

### После ритуала

1. Поблагодари высшие силы, которых призывал.
2. Выполни LBRP повторно — изгони любые остатки.
3. Погаси свечи.
4. Произнеси закрывающую молитву.

### Заземление

После интенсивной работы необходимо заземление:
- Съешь что-нибудь (хлеб, яблоко)
- Выпей воды
- Прими душ
- Прогуляйся на природе
- Займись обычными делами

### Записи

Запиши всё, что произошло:
- Дата, время, условия
- Что именно делал
- Как проявился дух
- Что было сказано
- Впечатления и ощущения

Эти записи — твой магический дневник, ценнейший ресурс для развития.

## После ритуала — интеграция

### Ожидание результатов

Результат может проявиться:
- Немедленно (редко)
- В течение дней или недель (чаще)
- Символически (требует интерпретации)

Не "дёргай" работу. Сделал — отпусти. Чрезмерное беспокойство интерферирует.

### Выполнение своей части

Если обещал духу что-то — выполни. Сразу же, не откладывая.

### Признаки проблем

Насторожись, если после ритуала:
- Постоянные кошмары
- Необъяснимое истощение
- Странные происшествия
- Ощущение чужого присутствия

Это может указывать на незакрытый ритуал или нежелательную привязку. Очисти себя и пространство, при необходимости — обратись за помощью.

---

Эвокация — это искусство, которое совершенствуется практикой. Первый ритуал редко идеален. Но каждый следующий — лучше. Работай, записывай, анализируй, улучшай.

Дух, однажды успешно вызванный, становится доступнее в будущем. Первый контакт — самый сложный.
"""

# Read existing book
with open('book.json', 'r', encoding='utf-8') as f:
    book = json.load(f)

# Add chapter 17
book['chapters'].append({
    'id': 17,
    'book': 'III',
    'title': 'Эвокация — полный ритуал',
    'content': chapter17_content
})

# Save
with open('book.json', 'w', encoding='utf-8') as f:
    json.dump(book, f, ensure_ascii=False, indent=2)

# Calculate total words
total_words = sum(len(ch['content'].split()) for ch in book['chapters'])

print(f"Added Chapter 17: Эвокация — полный ритуал")
print(f"Words in chapter: {len(chapter17_content.split())}")
print(f"Total chapters: {len(book['chapters'])}")
print(f"Total words: {total_words}")
