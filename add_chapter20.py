#!/usr/bin/env python3
"""Add Chapter 20: Диагностика и решение проблем"""

import json

chapter20_content = """# Диагностика и решение проблем

Магическая практика не всегда идёт гладко. Ритуалы не срабатывают, появляются нежелательные эффекты, контакт теряется. В этой главе — практическое руководство по диагностике и решению типичных проблем.

## Ритуал не работает — 10 причин

### 1. Недостаточная подготовка

**Симптом:** Ритуал проведён, но ничего не произошло — ни во время, ни после.

**Причина:** Слишком короткая или поверхностная подготовка. Маг не вошёл в правильное состояние.

**Решение:** Увеличь период подготовки. Больше медитации, более строгий пост, более полная очистка.

### 2. Неправильное время

**Симптом:** Операция "не завелась". Ощущение, что толкаешь стену.

**Причина:** Работа против планетарных течений. Например, операция роста при убывающей Луне.

**Решение:** Пересчитай тайминг. Повтори в более подходящее время.

### 3. Размытое намерение

**Симптом:** Результат непредсказуем или частичен.

**Причина:** "Хочу быть богатым" вместо "Получить повышение на этой работе в следующие три месяца".

**Решение:** Переформулируй цель конкретно. Визуализируй конкретный результат.

### 4. Внутренний конфликт

**Симптом:** Работа кажется сильной, но результата нет.

**Причина:** Часть психики не хочет результата. Сознательно желаешь денег, подсознательно боишься ответственности богатства.

**Решение:** Внутренняя работа. Найди конфликтующую часть. Работай с ней отдельно или измени цель.

### 5. Несоответствие уровню

**Симптом:** Работа с высшими силами не даёт контакта.

**Причина:** Недостаточное развитие для данного уровня. Пытаешься вызвать архангела, не освоив элементалей.

**Решение:** Вернись к более базовым практикам. Расти постепенно.

### 6. Невыполнение своей части

**Симптом:** Дух согласился помочь, но ничего не происходит.

**Причина:** Магия создаёт возможности, но если ты сидишь дома — возможности не реализуются. Попросил работу — нужно подавать резюме.

**Решение:** Действуй в материальном мире. Магия помогает тем, кто помогает себе.

### 7. Противодействие

**Симптом:** Ощущение блокировки, будто что-то мешает.

**Причина:** Чужая магия, духи-противники, или собственные кармические блоки.

**Решение:** Сначала очистка и защита. Диагностика источника противодействия. Затем — работа с ним отдельно.

### 8. Неправильный дух

**Симптом:** Результат неожиданный или искажённый.

**Причина:** Выбран неподходящий дух для задачи. Или дух обманул.

**Решение:** Изучи духов лучше. Верифицируй контакт. При необходимости — работай с другим духом.

### 9. Технические ошибки

**Симптом:** Ритуал "развалился" в процессе — забыл слова, потерял концентрацию.

**Причина:** Недостаточная репетиция.

**Решение:** Учи ритуал наизусть. Прогоняй мысленно много раз перед выполнением.

### 10. Нереалистичные ожидания

**Симптом:** Ждёшь немедленного драматического эффекта.

**Причина:** Кино и книги создали ложные ожидания. Магия работает тоньше.

**Решение:** Учись замечать тонкие результаты. Веди дневник. Отслеживай синхронности.

## Побочные эффекты

### Что нормально

После интенсивной практики могут быть:
- Яркие сны
- Лёгкое головокружение
- Временная усталость
- Эмоциональные волны
- Синхронности в жизни

Это нормально и проходит за дни.

### Что настораживает

**Длительное истощение.** Если усталость не проходит неделю — что-то не так. Возможно, "утечка" энергии или незакрытая работа.

**Голоса.** Если начинаешь слышать голоса вне ритуала, которые не уходят — это не "развитие способностей", это проблема.

**Изменения личности.** Если окружающие говорят, что ты изменился к худшему — прислушайся.

**Череда неудач.** Если после работы жизнь объективно ухудшилась — возможно, нежелательная привязка.

### Решение побочных эффектов

1. **Пауза.** Прекрати практики на время.
2. **Очистка.** LBRP ежедневно, дважды в день.
3. **Заземление.** Физическая активность, природа, простая еда.
4. **Соль и вода.** Ванны с солью, окропление пространства.
5. **Если не проходит — обращение за помощью.**

## Одержимость: миф и реальность

### Мифы

**Миф:** Демон полностью захватывает контроль, человек становится "одержимым" как в фильмах.

**Реальность:** Полная одержимость крайне редка. Обычно это тонкое влияние: навязчивые мысли, импульсы, изменения предпочтений.

**Миф:** Одержимость происходит внезапно от одного ритуала.

**Реальность:** Обычно это постепенный процесс — серия плохих решений, незакрытых работ, нарушенных обещаний.

### Признаки нежелательного влияния

- Мысли, которые ощущаются как "не свои"
- Импульсы к саморазрушительному поведению
- Необъяснимые страхи или фобии
- Ощущение присутствия, особенно ночью
- Кошмары с повторяющимся персонажем
- Резкие изменения предпочтений в еде, музыке, людях

### Что делать

**Лёгкая степень:**
1. Усиленная очистка — LBRP минимум дважды в день.
2. Обращение к HGA (если контакт установлен).
3. Работа с противоположным ангелом (если влияние от духа Гоэтии — обратись к соответствующему ангелу Шемхамфораш).
4. Пересмотр и закрытие незавершённых работ.

**Серьёзная степень:**
1. Полное прекращение практик.
2. Обращение к опытному практику или священнику.
3. Профессиональная психологическая помощь (параллельно).

## Экзорцизм и очищение

### Самоочищение

**Ежедневная практика:**
- LBRP утром и вечером
- Молитва или медитация
- Контакт с природой

**Еженедельная практика:**
- Ванна с морской солью
- Окуривание помещения
- Проверка и закрытие "хвостов"

**Экстренное очищение:**
- LBRP многократно, до ощущения чистоты
- Вибрация защитных имён: YHVH, AGLA, IAO
- Визуализация огня, сжигающего все привязки
- Призывание архангела Михаэля

### Очищение пространства

1. Физическая уборка — мусор несёт энергетический мусор.
2. Открыть окна — проветрить.
3. Пройти по комнатам с солью — посыпать углы.
4. Окурить благовонием — ладан, шалфей, мирра.
5. Выполнить LBRP в каждой комнате.
6. Закрыть окна, зажечь свечу, произнести благословение.

### Когда обращаться за помощью

- Если самостоятельные методы не помогают неделю
- Если симптомы усиливаются
- Если начинаются физические проблемы
- Если окружающие серьёзно обеспокоены

## Психологические vs духовные проблемы

### Сложность различения

Голоса могут быть духом — а могут быть симптомом шизофрении. Ощущение присутствия может быть реальным контактом — или паранойей. Различить изнутри почти невозможно.

### Критерии различения

**Вероятнее духовное:**
- Началось после конкретной практики
- Реагирует на магические методы
- Связано с конкретной сущностью
- Не влияет на общее функционирование

**Вероятнее психологическое:**
- Было и до практик
- Не реагирует на магические методы
- Размытое, без конкретной сущности
- Ухудшает работоспособность, отношения, здоровье

### Практический подход

1. **Попробуй оба подхода.** Магическая очистка + консультация психолога.
2. **Не стесняйся профессионалов.** Психолог — не враг магии, а инструмент.
3. **Честность с собой.** Если практики разрушают жизнь — возможно, нужен перерыв независимо от причины.

## Профилактика

### До начала серьёзной работы

- Освой базу: медитация, LBRP, Срединный Столп
- Установи контакт с HGA (хотя бы начальный)
- Наведи порядок в жизни — психика, отношения, здоровье
- Изучи теорию — не работай вслепую

### Во время работы

- Никогда не пропускай защиту
- Всегда закрывай ритуал полностью
- Веди записи — отслеживай изменения
- Не обещай духам того, что не выполнишь

### После работы

- Заземляйся
- Наблюдай за результатами и побочками
- Корректируй подход на основе опыта
- Делай паузы между интенсивными работами

---

Проблемы — часть пути. Маг, который никогда не сталкивался с трудностями, либо не практикует, либо не замечает. Важно не избегать проблем, а уметь их решать.

Практикуй осознанно, веди записи, развивай диагностические навыки — и большинства проблем можно избежать, а оставшиеся — решить.
"""

# Read existing book
with open('book.json', 'r', encoding='utf-8') as f:
    book = json.load(f)

# Add chapter 20
book['chapters'].append({
    'id': 20,
    'book': 'III',
    'title': 'Диагностика и решение проблем',
    'content': chapter20_content
})

# Save
with open('book.json', 'w', encoding='utf-8') as f:
    json.dump(book, f, ensure_ascii=False, indent=2)

# Calculate total words
total_words = sum(len(ch['content'].split()) for ch in book['chapters'])

print(f"Added Chapter 20: Диагностика и решение проблем")
print(f"Words in chapter: {len(chapter20_content.split())}")
print(f"Total chapters: {len(book['chapters'])}")
print(f"Total words: {total_words}")
